{"^":["class",{"#":["name","cdh::hue","parent","cdh::hue::defaults","params",{"#":["http_host",{"#":["value",{"^":["var","cdh::hue::defaults::http_host"]}]},"http_port",{"#":["value",{"^":["var","cdh::hue::defaults::http_port"]}]},"secret_key",{"#":["value",{"^":["var","cdh::hue::defaults::secret_key"]}]},"app_blacklist",{"#":["value",{"^":["var","cdh::hue::defaults::app_blacklist"]}]},"banner_top_html",{"#":["value",{"^":["var","cdh::hue::defaults::banner_top_html"]}]},"hive_server_host",{"#":["value",{"^":["var","cdh::hue::defaults::hive_server_host"]}]},"hive_server_conn_timeout",{"#":["value",{"^":["var","cdh::hue::defaults::hive_server_conn_timeout"]}]},"hive_download_row_limit",{"#":["value",{"^":["var","cdh::hue::defaults::hive_download_row_limit"]}]},"impala_server_host",{"#":["value",{"^":["var","cdh::hue::defaults::impala_server_host"]}]},"impala_impersonation_enabled",{"#":["value",{"^":["var","cdh::hue::defaults::impala_impersonation_enabled"]}]},"db_engine",{"#":["value",{"^":["var","cdh::hue::defaults::db_engine"]}]},"jdbc_database",{"#":["value",{"^":["var","cdh::hue::defaults::jdbc_database"]}]},"jdbc_username",{"#":["value",{"^":["var","cdh::hue::defaults::jdbc_username"]}]},"jdbc_password",{"#":["value",{"^":["var","cdh::hue::defaults::jdbc_password"]}]},"jdbc_host",{"#":["value",{"^":["var","cdh::hue::defaults::jdbc_password"]}]},"jdbc_port",{"#":["value",{"^":["var","cdh::hue::defaults::jdbc_port"]}]},"timezone",{"#":["value",{"^":["var","cdh::hue::defaults::timezone"]}]},"oozie_url",{"#":["value",{"^":["var","cdh::hue::defaults::oozie_url"]}]},"oozie_security_enabled",{"#":["value",{"^":["var","cdh::hue::defaults::oozie_security_enabled"]}]},"proxy_whitelist",{"#":["value",{"^":["var","cdh::hue::defaults::proxy_whitelist"]}]},"proxy_blacklist",{"#":["value",{"^":["var","cdh::hue::defaults::proxy_blacklist"]}]},"smtp_host",{"#":["value",{"^":["var","cdh::hue::defaults::smtp_host"]}]},"smtp_port",{"#":["value",{"^":["var","cdh::hue::defaults::smtp_port"]}]},"smtp_user",{"#":["value",{"^":["var","cdh::hue::defaults::smtp_user"]}]},"smtp_password",{"#":["value",{"^":["var","cdh::hue::defaults::smtp_password"]}]},"smtp_from_email",{"#":["value",{"^":["var","cdh::hue::defaults::smtp_from_email"]}]},"django_admin_name",{"#":["value",{"^":["var","cdh::hue::defaults::django_admin_name"]}]},"django_admin_email",{"#":["value",{"^":["var","cdh::hue::defaults::django_admin_email"]}]},"ssl_private_key",{"#":["value",{"^":["var","cdh::hue::defaults::ssl_private_key"]}]},"ssl_certificate",{"#":["value",{"^":["var","cdh::hue::defaults::ssl_certificate"]}]},"ldap_url",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_url"]}]},"ldap_cert",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_cert"]}]},"ldap_nt_domain",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_nt_domain"]}]},"ldap_bind_dn",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_bind_dn"]}]},"ldap_base_dn",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_base_dn"]}]},"ldap_bind_password",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_bind_password"]}]},"ldap_username_pattern",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_username_pattern"]}]},"ldap_user_filter",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_user_filter"]}]},"ldap_user_name_attr",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_user_name_attr"]}]},"ldap_group_filter",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_group_filter"]}]},"ldap_group_name_attr",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_group_name_attr"]}]},"ldap_group_member_attr",{"#":["value",{"^":["var","cdh::hue::defaults::ldap_group_member_attr"]}]},"hue_ini_template",{"#":["value",{"^":["var","cdh::hue::defaults::hue_ini_template"]}]},"hue_log4j_template",{"#":["value",{"^":["var","cdh::hue::defaults::hue_log4j_template"]}]},"hue_log_conf_template",{"#":["value",{"^":["var","cdh::hue::defaults::hue_log_conf_template"]}]},"hbase_clusters",{"#":["value",{"^":["var","cdh::hue::defaults::hbase_clusters"]}]},"zookeeper_hosts",{"#":["value",{"^":["var","cdh::hue::defaults::zookeeper_hosts"]}]}]},"body",[{"^":["->",{"^":["access",{"^":["qr","Class"]},"cdh::hadoop"]},{"^":["access",{"^":["qr","Class"]},"cdh::hue"]}]},{"^":["=",{"^":["var","httpfs_enabled"]},{"^":["var","cdh::hadoop::httpfs_enabled"]}]},{"^":["resource",{"#":["type",{"^":["qn","package"]},"bodies",[{"#":["title","hue","ops",[{"^":["=>","ensure","installed"]}]]}]]}]},{"^":["=",{"^":["var","config_directory"]},{"^":["concat","/etc/hue/conf.",{"^":["str",{"^":["var","cdh::hadoop::cluster_name"]}]}]}]},{"^":["resource",{"#":["type",{"^":["qn","file"]},"bodies",[{"#":["title",{"^":["var","config_directory"]},"ops",[{"^":["=>","ensure","directory"]},{"^":["=>","require",{"^":["access",{"^":["qr","Package"]},"hue"]}]}]]}]]}]},{"^":["resource",{"#":["type",{"^":["qn","cdh::alternative"]},"bodies",[{"#":["title","hue-conf","ops",[{"^":["=>","link","/etc/hue/conf"]},{"^":["=>","path",{"^":["var","config_directory"]}]}]]}]]}]},{"^":["resource",{"#":["type",{"^":["qn","user"]},"bodies",[{"#":["title","hue","ops",[{"^":["=>","gid","hue"]},{"^":["=>","comment","Hue daemon"]},{"^":["=>","home","/usr/lib/hue"]},{"^":["=>","shell","/bin/false"]},{"^":["=>","managehome",false]},{"^":["=>","system",true]},{"^":["=>","require",{"^":["access",{"^":["qr","Package"]},"hue"]}]}]]}]]}]},{"^":["if",{"#":["test",{"^":["call",{"#":["functor",{"^":["qn","defined"]},"args",[{"^":["access",{"^":["qr","Class"]},"cdh::hive"]}]]}]},"then",[{"^":["=",{"^":["var","hive_enabled"]},true]},{"^":["->",{"^":["access",{"^":["qr","Class"]},"cdh::hive"]},{"^":["access",{"^":["qr","Class"]},"cdh::hue"]}]},{"^":["resource",{"#":["type",{"^":["qn","file"]},"bodies",[{"#":["title","/etc/init.d/hue","ops",[{"^":["=>","source","puppet:///modules/cdh/hue/hue.init.d.sh"]},{"^":["=>","mode","0755"]},{"^":["=>","owner","root"]},{"^":["=>","group","root"]},{"^":["=>","require",{"^":["access",{"^":["qr","Package"]},"hue"]}]},{"^":["=>","notify",{"^":["access",{"^":["qr","Service"]},"hue"]}]}]]}]]}]}]]}]},{"^":["if",{"#":["test",{"^":["paren",{"^":["and",{"^":["var","ssl_private_key"]},{"^":["var","ssl_certificate"]}]}]},"then",[{"^":["=",{"^":["var","ssl_enabled"]},true]},{"^":["if",{"#":["test",{"^":["paren",{"^":["!",{"^":["call",{"#":["functor",{"^":["qn","defined"]},"args",[{"^":["access",{"^":["qr","Package"]},"openssl"]}]]}]}]}]},"then",[{"^":["resource",{"#":["type",{"^":["qn","package"]},"bodies",[{"#":["title","openssl","ops",[{"^":["=>","ensure","installed"]},{"^":["=>","before",{"^":["access",{"^":["qr","User"]},"hue"]}]}]]}]]}]}]]}]},{"^":["if",{"#":["test",{"^":["paren",{"^":["!",{"^":["call",{"#":["functor",{"^":["qn","defined"]},"args",[{"^":["access",{"^":["qr","Package"]},"ssl-cert"]}]]}]}]}]},"then",[{"^":["resource",{"#":["type",{"^":["qn","package"]},"bodies",[{"#":["title","ssl-cert","ops",[{"^":["=>","ensure","installed"]},{"^":["=>","before",{"^":["access",{"^":["qr","User"]},"hue"]}]}]]}]]}]}]]}]},{"^":["if",{"#":["test",{"^":["paren",{"^":["!",{"^":["call",{"#":["functor",{"^":["qn","defined"]},"args",[{"^":["access",{"^":["qr","Package"]},"python-openssl"]}]]}]}]}]},"then",[{"^":["resource",{"#":["type",{"^":["qn","package"]},"bodies",[{"#":["title","python-openssl","ops",[{"^":["=>","ensure","installed"]}]]}]]}]}]]}]},{"^":["if",{"#":["test",{"^":["paren",{"^":["and",{"^":["paren",{"^":["==",{"^":["var","ssl_private_key"]},{"^":["var","cdh::hue::defaults::ssl_private_key"]}]}]},{"^":["paren",{"^":["==",{"^":["var","ssl_certificate"]},{"^":["var","cdh::hue::defaults::ssl_certificate"]}]}]}]}]},"then",[{"^":["resource",{"#":["type",{"^":["qn","exec"]},"bodies",[{"#":["title","generate_hue_ssl_private_key","ops",[{"^":["=>","command",{"^":["concat","/usr/bin/openssl genrsa 2048 > ",{"^":["str",{"^":["var","ssl_private_key"]}]}]}]},{"^":["=>","creates",{"^":["var","ssl_private_key"]}]},{"^":["=>","require",{"^":["array",{"^":["access",{"^":["qr","Package"]},"openssl"]},{"^":["access",{"^":["qr","User"]},"hue"]}]}]},{"^":["=>","notify",{"^":["access",{"^":["qr","Service"]},"hue"]}]},{"^":["=>","before",{"^":["access",{"^":["qr","File"]},{"^":["var","ssl_private_key"]}]}]}]]}]]}]},{"^":["resource",{"#":["type",{"^":["qn","exec"]},"bodies",[{"#":["title","generate_hue_ssl_certificate","ops",[{"^":["=>","command",{"^":["concat","/usr/bin/openssl req -new -x509 -nodes -sha1 -subj '/C=US/ST=Denial/L=Nonya/O=Dis/CN=www.example.com' -key ",{"^":["str",{"^":["var","ssl_private_key"]}]}," -out ",{"^":["str",{"^":["var","ssl_certificate"]}]}]}]},{"^":["=>","creates",{"^":["var","ssl_certificate"]}]},{"^":["=>","require",{"^":["access",{"^":["qr","Exec"]},"generate_hue_ssl_private_key"]}]},{"^":["=>","notify",{"^":["access",{"^":["qr","Service"]},"hue"]}]},{"^":["=>","before",{"^":["access",{"^":["qr","File"]},{"^":["var","ssl_certificate"]}]}]}]]}]]}]}]]}]},{"^":["resource",{"#":["type",{"^":["qn","file"]},"bodies",[{"#":["title",{"^":["var","ssl_private_key"]},"ops",[{"^":["=>","mode","0440"]},{"^":["=>","owner","root"]},{"^":["=>","group","hue"]},{"^":["=>","before",{"^":["access",{"^":["qr","Service"]},"hue"]}]}]]}]]}]},{"^":["resource",{"#":["type",{"^":["qn","file"]},"bodies",[{"#":["title",{"^":["var","ssl_certificate"]},"ops",[{"^":["=>","mode","0444"]},{"^":["=>","owner","root"]},{"^":["=>","group","hue"]},{"^":["=>","before",{"^":["access",{"^":["qr","Service"]},"hue"]}]}]]}]]}]}]]}]},{"^":["if",{"#":["test",{"^":["paren",{"^":["and",{"^":["var","hive_enabled"]},{"^":["var","ssl_enabled"]}]}]},"then",[{"^":["=",{"^":["var","hue_groups"]},{"^":["array","hive","ssl-cert"]}]}],"else",[{"^":["if",{"#":["test",{"^":["paren",{"^":["var","hive_enabled"]}]},"then",[{"^":["=",{"^":["var","hue_groups"]},{"^":["array","hive"]}]}],"else",[{"^":["if",{"#":["test",{"^":["paren",{"^":["var","ssl_enabled"]}]},"then",[{"^":["=",{"^":["var","hue_groups"]},{"^":["array","ssl-cert"]}]}]]}]}]]}]}]]}]},{"^":["if",{"#":["test",{"^":["paren",{"^":["var","hue_groups"]}]},"then",[{"^":["resource-override",{"#":["resources",{"^":["access",{"^":["qr","User"]},"hue"]},"ops",[{"^":["+>","groups",{"^":["var","hue_groups"]}]}]]}]}]]}]},{"^":["=",{"^":["var","namenode_host"]},{"^":["var","::cdh::hadoop::primary_namenode_host"]}]},{"^":["resource",{"#":["type",{"^":["qn","file"]},"bodies",[{"#":["title",{"^":["concat",{"^":["str",{"^":["var","config_directory"]}]},"/hue.ini"]},"ops",[{"^":["=>","content",{"^":["call",{"#":["functor",{"^":["qn","template"]},"args",[{"^":["var","hue_ini_template"]}]]}]}]},{"^":["=>","require",{"^":["access",{"^":["qr","Package"]},"hue"]}]}]]}]]}]},{"^":["resource",{"#":["type",{"^":["qn","file"]},"bodies",[{"#":["title",{"^":["concat",{"^":["str",{"^":["var","config_directory"]}]},"/log4j.properties"]},"ops",[{"^":["=>","content",{"^":["call",{"#":["functor",{"^":["qn","template"]},"args",[{"^":["var","hue_log4j_template"]}]]}]}]},{"^":["=>","require",{"^":["access",{"^":["qr","Package"]},"hue"]}]}]]}]]}]},{"^":["resource",{"#":["type",{"^":["qn","file"]},"bodies",[{"#":["title",{"^":["concat",{"^":["str",{"^":["var","config_directory"]}]},"/log.conf"]},"ops",[{"^":["=>","content",{"^":["call",{"#":["functor",{"^":["qn","template"]},"args",[{"^":["var","hue_log_conf_template"]}]]}]}]},{"^":["=>","require",{"^":["access",{"^":["qr","Package"]},"hue"]}]}]]}]]}]},{"^":["resource",{"#":["type",{"^":["qn","service"]},"bodies",[{"#":["title","hue","ops",[{"^":["=>","ensure","running"]},{"^":["=>","enable",true]},{"^":["=>","hasrestart",true]},{"^":["=>","hasstatus",true]},{"^":["=>","subscribe",{"^":["access",{"^":["qr","File"]},{"^":["concat",{"^":["str",{"^":["var","config_directory"]}]},"/hue.ini"]}]}]},{"^":["=>","require",{"^":["array",{"^":["access",{"^":["qr","Package"]},"hue"]},{"^":["access",{"^":["qr","User"]},"hue"]}]}]}]]}]]}]}]]}]}
